<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <!-- Meta para dispositivos móviles (responsive) -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Base de Datos - Ejercicios</title>
  <!-- Vinculamos el archivo CSS -->
  <link rel="stylesheet" href="css/index.css">
</head>

<body>

  <!-- Datos de la Actividad -->
  <div class="datos-actividad">
    <p><strong>Asignatura:</strong> Bases de datos I. Primera entrega base de datos 01</p>
    <p><strong>Docente:</strong> Carlos García Calatraba</p>
    <p><strong>Alumnos:</strong> Steven Louis Allus, Antonio López García</p>
    <p><strong>Universidad:</strong> Carlemant Bachelor de Ciencia de Datos</p>
  </div>

  <!-- Contenedor del índice -->
  <div class="indice">
    <h2>Índice</h2>
    <button class="btn-toggle" onclick="toggleIndice()">
      Mostrar/Ocultar Ejercicios
    </button>

    <!-- Lista de las 20 preguntas -->
    <ul id="listaEjercicios">
      <li><a href="#respuesta_01">1 - Dibuja (mediante Excel, draw.io…) la relación con sus atributos.</a></li>
      <li><a href="#respuesta_02">2 - Indica cuál será la clave primaria de dicha relación y justifica tu elección.</a>
      </li>
      <li><a href="#respuesta_03">3 - ¿Cómo se representaría textualmente, siguiendo el modelo R(A1, A2,..)?</a></li>
      <li><a href="#respuesta_04">4 - ¿Qué tipo de dato es cada atributo? Justifica tus elecciones.</a></li>
      <li><a href="#respuesta_05">5 - Haz una sentencia SQL para crear la tabla en PostgreSQL.</a></li>
      <li><a href="#respuesta_06">6 - Crea las sentencias INSERT para introducir los vecinos (José Miguel, Isabel Ruiz,
          Lucía).</a></li>
      <li><a href="#respuesta_07">7 - ¿Qué hacer para insertar un vecino que no tenga apodo?</a></li>
      <li><a href="#respuesta_08">8 - Inserta un vecino que no tenga mote. Muestra el estado de la tabla.</a></li>
      <li><a href="#respuesta_09">9 - Utiliza la sentencia ALTER TABLE para añadir Ocupación y Sexo.</a></li>
      <li><a href="#respuesta_10">10 - ¿Cómo actualizar la información de estos atributos en la base de datos?</a></li>
      <li><a href="#respuesta_11">11 - Crea y ejecuta la sentencia ALTER TABLE para añadir “m2”.</a></li>
      <li><a href="#respuesta_12">12 - Añade los m2 a cada vecino. Concha debe tener más m2 que nadie.</a></li>
      <li><a href="#respuesta_13">13 - Genera las sentencias CREATE TABLE (PERSONAS_NORM y VIVIENDAS) y relaciónalas con
          una FK.</a></li>
      <li><a href="#respuesta_14">14 - Crea una consulta SELECT con ORDER BY (m2) para ordenar de mayor a menor.</a>
      </li>
      <li><a href="#respuesta_15">15 - ¿Qué query elimina la columna “m2” de la tabla VIVIENDAS?</a></li>
      <li><a href="#respuesta_16">16 - ¿Qué hacer con la tabla VIVIENDAS al quedar casi vacía? Explica pros/contras.</a>
      </li>
      <li><a href="#respuesta_17">17 - Dibuja el diseño de PERSONA y subclases (Portero, Alquilado, Propietario).</a>
      </li>
      <li><a href="#respuesta_18">18 - ¿Dónde representamos a José María, que no encaja en las subclases?</a></li>
      <li><a href="#respuesta_19">19 - ¿Qué sentencias SQL permiten borrar las tablas creadas?</a></li>
      <li><a href="#respuesta_20">20 - Reflexión final: ¿Qué opinas de las últimas palabras de Juan Cuesta?</a></li>
    </ul>
  </div>

  <!-- ==================== TEXTO DEL EJERCICIO ==================== -->
  <div class="texto-ejercicio">
    <h3>Descripción de las tareas</h3>
    <p>
      Juan Cuesta, presidente de nuestra comunidad de vecinos, quiere innovar en la gestión de la
      misma. Para ello, se propone crear un sistema informático holístico, con la intención de
      centralizar información sobre los vecinos, su residencia, el pago de cuotas, su comportamiento
      para con la comunidad, etc. Para ello, quiere empezar por la piedra angular de todo sistema de
      datos: La base de datos.
    </p>
    <p>
      Nuestro presidente sabe que no puede empezar a construir una base de datos “sin más”, dado
      que, antes de nada, es muy importante conceptualizarla para evitar futuros errores. Por ello,
      primero plantea una pequeña especificación del mundo real y conceptual. Sabe que, en una
      comunidad de vecinos, la relación (o tabla) principal será, obviamente, una tabla sobre las
      personas que viven en ella.
    </p>
    <p>
      Nuestro presidente propone que, entre los atributos de esta primera tabla “PERSONAS”, se
      encuentren los siguiente 4 atributos: DNI, Nombre, Apellidos, Planta y piso. Además, como entre
      ellos muchas veces se llaman por el apodo, quiere introducir un 5º atributo: El mote.
    </p>
    <p>
      Ayuda a Juan Cuesta, presidente de la comunidad, en la creación de esta primera relación
      llamada PERSONAS. <a href="#respuesta_01">[1]</a> Dibuja (mediante Excel, draw.io o cualquier herramienta similar)
      dicha
      relación con sus atributos. Además, <a href="#respuesta_02">[2]</a> señala siguiendo la convención, cuál será la
      clave
      primaria de dicha relación y justifica su elección. <a href="#respuesta_03">[3]</a> ¿Cómo se representaría
      textualmente,
      siguiendo el modelo R(A1, A2,..)?
    </p>
    <p>
      Él ha encontrado, navegando por internet, el siguiente esquema (obviamente de otro caso de uso):
      “Estudiante (ID, Nombre, Fecha Nacimiento)”. Una vez diseñado, Juan quiere crear dicha tabla en
      PostgreSQL, para empezar a introducir datos. Ahora bien, necesita saber el dominio de cada
      atributo. <a href="#respuesta_04">[4]</a> ¿Qué tipo de dato es cada atributo? Justifica tus elecciones.
      <a href="#respuesta_05">[5]</a> Haz una sentencia SQL para crear una tabla acorde, en PostgreSQL.
    </p>
    <p>
      Contento por haber creado su primera tabla, Juan quiere introducir datos sobre los vecinos en la
      misma, para practicar. Ha pensado en introducir a su hijo (José Miguel), su actual mujer (Isabel
      Ruiz) y una vecina del 3º A: Lucía. <a href="#respuesta_06">[6]</a> Crea las sentencias INSERT necesarias para
      introducir dichas
      filas en la tabla PERSONAS y ejecútalas. Puedes inventarte los DNI. Pégalas en el reporte, y
      también un pantallazo del estado de la tabla. Puedes encontrar información sobre los vecinos
      aquí y aquí.
    </p>
    <p>
      Juan se ha dado cuenta que el atributo “Apodo” no siempre sirve, porque no todos tienen uno.
      <a href="#respuesta_07">[7]</a> ¿Qué podría hacer Juan, para insertar una fila sobre un vecino que no tenga apodo?
      <a href="#respuesta_08">[8]</a> Busca un vecino que no tenga mote, e introdúcelo en la base de datos.
      Pega un pantallazo del estado de la tabla.
    </p>
    <p>
      Posteriormente, ve que debería haber más atributos importantes. Decide añadirlos más tarde. Sabe
      que un ALTER TABLE es costoso, pero PostgreSQL es flexible. Encuentra la sentencia:
      <code>ALTER TABLE table_name ADD column_name datatype;</code>.
      <a href="#respuesta_09">[9]</a> Ayuda a Juan y utiliza la sentencia ALTER TABLE para
      añadir a la tabla los atributos Ocupación y Sexo. Además, Juan quiere introducir estos nuevos
      atributos a los vecinos existentes. <a href="#respuesta_10">[10]</a> ¿Qué sentencia debería utilizar para
      actualizar esa
      información no existente? Escribe las sentencias y pega un pantallazo del estado de la base de
      datos.
    </p>
    <p>
      Durante una junta de vecinos, Concha se queja de que cada piso paga 200€ mensuales sin considerar
      los m2 del piso. Se declara morosa. Presionado, Juan decide introducir un nuevo atributo “m2”.
      <a href="#respuesta_11">[11]</a> Crea y ejecuta la sentencia ALTER TABLE y pégala en el reporte.
      <a href="#respuesta_12">[12]</a> Añade unos m2
      a cada vecino, asegurando que Concha tenga el piso con más metros cuadrados. Si varios viven en
      el mismo piso, deben tener los mismos m2. Pega un pantallazo de cómo queda la tabla.
    </p>
    <p>
      Luego ve que no tiene sentido que cada persona repita los m2. Lo ideal es normalizar:
      una tabla PERSONAS y otra VIVIENDAS, relacionadas por llave foránea.
      <a href="#respuesta_13">[13]</a> Genera las sentencias CREATE TABLE
      de ambas tablas (PERSONAS_NORM y VIVIENDAS), distribuyendo los atributos y creando la relación.
      Llena ambas tablas con los vecinos ya insertados y pega un pantallazo.
    </p>
    <p>
      Juan decide ordenar los pisos por m2. <a href="#respuesta_14">[14]</a> Crea una consulta SELECT con ORDER BY para
      listar los
      pisos de mayor a menor. Pega la query y un pantallazo del resultado.
    </p>
    <p>
      Al ver que Concha tiene el piso con más m2, esta vuelve a protestar. Juan elimina la columna “m2”
      de la tabla VIVIENDAS. <a href="#respuesta_15">[15]</a> ¿Qué query debe ejecutar para borrar dicha columna? Pega
      la sentencia
      y un pantallazo de cómo queda la tabla.
    </p>
    <p>
      Una vez borrada la columna, la tabla VIVIENDAS queda casi vacía (solo la clave primaria).
      <a href="#respuesta_16">[16]</a> ¿Qué debería hacer Juan? ¿Mantener la tabla, para que esté “muy normalizada”, o
      borrarla y volver a meter la planta y el piso en PERSONAS? Explica tu opción elegida con sus
      pros y contras (3 argumentos en total).
    </p>
    <p>
      Por otra parte, Juan nota que en el edificio hay varios tipos de personas: porteros, alquilados
      y propietarios. También está José María, que no encaja en ninguna categoría.
      <a href="#respuesta_17">[17]</a> Dibuja o esquematiza la tabla PERSONA y la relación con las subclases (Portero,
      Alquilado, Propietario). ¿Cómo se llama este diseño?
      <a href="#respuesta_18">[18]</a> ¿En qué relación o clase
      debería estar José María, al no encajar en ninguna de las subclases?
    </p>
    <p>
      Finalmente, cansado, Juan decide borrar todas las tablas creadas.
      <a href="#respuesta_19">[19]</a> ¿Qué sentencia(s) SQL
      debería ejecutar para eliminar definitivamente las tablas de la base de datos?
      Luego reflexiona
      sobre los continuos cambios que ha hecho sin planificar.
      <a href="#respuesta_20">[20]</a> ¿Qué opinas sobre la
      última reflexión de Juan Cuesta? ¿Está en lo correcto o exagera?
    </p>
  </div>
  <!-- ============================================================ -->

  <!-- =================== SECCIONES DE RESPUESTAS =================== -->
  <!-- (Placeholder: aquí irán las respuestas definitivas más adelante) -->

  <div id="respuesta_01" class="respuesta">
    <h3>1 - Dibuja (mediante Excel, draw.io…) la relación con sus atributos.</h3>
    <img src="/img/ask_01.jpg" alt="Relación atributos">
  </div>

  <div id="respuesta_02" class="respuesta">
    <h3>2 - Indica cuál será la clave primaria de dicha relación y justifica tu elección.</h3>
    <p>
      Para la tabla <strong>PERSONAS</strong>, podemos utilizar <strong>DNI</strong> como clave primaria, ya que:
    </p>
    <ul>
      <li>El DNI es un identificador único para cada persona.</li>
      <li>Es un dato sin ambigüedades.</li>
      <li>Evita las duplicidades, no existen dos personas con el mismo DNI.</li>
      <li>En el caso que existieran es un error.</li>
    </ul>
  </div>

  <div id="respuesta_03" class="respuesta">
    <h3>3 - ¿Cómo se representaría textualmente, siguiendo el modelo R(A1, A2,..)?</h3>
    <p>
      Representación textual <strong>PERSONAS</strong>,donde la clave primaria se subraya::
    </p>
    <em>PERSONAS(<u>DNI</u>, Nombre, Apellidos, Planta, Piso, Mote)</em>

  </div>

  <div id="respuesta_04" class="respuesta">
    <h3>4 - ¿Qué tipo de dato es cada atributo? Justifica tus elecciones.</h3>
    <p>
      <strong>DNI:</strong> Utilizaremos <code>CHAR(9)</code> porque el formato del DNI es siempre el mismo (8
      dígitos y una letra).
    </p>

    <p>
      <strong>Nombre:</strong> Se utiliza <code>VARCHAR(50)</code> porque es una cadena de caracteres variable y,
      generalmente, los nombres no exceden esta longitud.
    </p>
    <p>
      <strong>Apellidos:</strong> Se define como <code>VARCHAR(100)</code> para permitir almacenar apellidos compuestos
      o de mayor longitud, garantizando suficiente espacio.
    </p>
    <p>
      <strong>Planta:</strong> Se utiliza <code>INTEGER</code> ya que representa el número del piso en el edificio. (Si
      se considerase la posibilidad de plantas no numéricas, se podría optar por un tipo de cadena, pero en este
      ejercicio se asume numérico).
    </p>
    <p>
      <strong>Piso:</strong> Se define también como <code>INTEGER</code>, pues identifica el número de la puerta o
      apartamento en dicho piso.
    </p>
    <p>
      <strong>Mote:</strong> Se utiliza <code>VARCHAR(30)</code> al ser un apodo, que normalmente es una cadena corta y
      de longitud variable.
    </p>
  </div>


  <div id="respuesta_05" class="respuesta">
    <h3>5 - Haz una sentencia SQL para crear la tabla en PostgreSQL.</h3>
    <pre>
    CREATE TABLE PERSONAS (
      DNI CHAR(9) PRIMARY KEY,
      Nombre VARCHAR(50) NOT NULL,
      Apellidos VARCHAR(100) NOT NULL,
      Planta INTEGER NOT NULL,
      Piso INTEGER NOT NULL,
      Mote VARCHAR(30)
  );
    </pre>
  </div>

  <div id="respuesta_06" class="respuesta">
    <h3>6 - Crea las sentencias INSERT para introducir los vecinos (José Miguel, Isabel Ruiz, Lucía).</h3>
    <img src="/img/ask_06.jpg" alt="Insert personas">
  </div>

  <div id="respuesta_07" class="respuesta">
    <h3>7 - ¿Qué hacer para insertar un vecino que no tenga apodo?</h3>
    <p>
      Si un vecino no tiene apodo, se inserta un valor <code>NULL</code> en la columna <code>Mote</code>.
    </p>
  </div>

  <div id="respuesta_08" class="respuesta">
    <h3>8 - Inserta un vecino que no tenga mote. Muestra el estado de la tabla.</h3>
    <img src="/img/ask_07.jpg" alt="Mote NULL">
  </div>

  <div id="respuesta_09" class="respuesta">
    <h3>9 - Utiliza la sentencia ALTER TABLE para añadir Ocupación y Sexo.</h3>
    <p>
      Se pueden agregar las columnas <code>Ocupacion</code> y <code>Sexo</code> a la tabla <strong>PERSONAS</strong>
      utilizando las siguientes sentencias SQL:
    </p>
    <img src="/img/ask_09.jpg" alt="ALTER TABLE ">
  </div>


  <div id="respuesta_10" class="respuesta">
    <h3>10 - ¿Cómo actualizar la información de estos atributos en la base de datos?</h3>
    <img src="/img/ask_10.jpg" alt="Update ">
  </div>


  <div id="respuesta_11" class="respuesta">
    <h3>11 - Crea y ejecuta la sentencia ALTER TABLE para añadir “m2”.</h3>
    <img src="/img/ask_11.jpg" alt="Update ">
  </div>

  <div id="respuesta_12" class="respuesta">
    <h3>12 - Añade los m2 a cada vecino. Concha debe tener más m2 que nadie.</h3>
    <p>Contenido de la respuesta del punto doce.</p>
  </div>

  <div id="respuesta_13" class="respuesta">
    <h3>13 - Genera las sentencias CREATE TABLE (PERSONAS_NORM y VIVIENDAS) y relaciónalas con una FK.</h3>
    <p>Contenido de la respuesta del punto trece.</p>
  </div>

  <div id="respuesta_14" class="respuesta">
    <h3>14 - Crea una consulta SELECT con ORDER BY (m2) para ordenar de mayor a menor.</h3>
    <p>Contenido de la respuesta del punto catorce.</p>
  </div>

  <div id="respuesta_15" class="respuesta">
    <h3>15 - ¿Qué query elimina la columna “m2” de la tabla VIVIENDAS?</h3>
    <p>Contenido de la respuesta del punto quince.</p>
  </div>

  <div id="respuesta_16" class="respuesta">
    <h3>16 - ¿Qué hacer con la tabla VIVIENDAS al quedar casi vacía? Explica pros/contras.</h3>
    <p>Contenido de la respuesta del punto dieciséis.</p>
  </div>

  <div id="respuesta_17" class="respuesta">
    <h3>17 - Dibuja el diseño de PERSONA y subclases (Portero, Alquilado, Propietario).</h3>
    <p>Contenido de la respuesta del punto diecisiete.</p>
  </div>

  <div id="respuesta_18" class="respuesta">
    <h3>18 - ¿Dónde representamos a José María, que no encaja en las subclases?</h3>
    <p>Contenido de la respuesta del punto dieciocho.</p>
  </div>

  <div id="respuesta_19" class="respuesta">
    <h3>19 - ¿Qué sentencias SQL permiten borrar las tablas creadas?</h3>
    <p>Contenido de la respuesta del punto diecinueve.</p>
  </div>

  <div id="respuesta_20" class="respuesta">
    <h3>20 - Reflexión final: ¿Qué opinas de las últimas palabras de Juan Cuesta?</h3>
    <p>Contenido de la respuesta del punto veinte.</p>
  </div>
  <!-- =============================================================== -->

  <!-- Script -->
  <script src="js/index.js"></script>
</body>

</html>